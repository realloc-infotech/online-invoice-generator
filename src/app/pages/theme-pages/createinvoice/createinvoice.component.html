<div class="container">
  <div class="row rowFix">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <mat-sidenav-container class="cardWithShadow m-t-20">
          <mat-sidenav-content style="overflow: hidden;">
            <mat-card>
              <mat-card-content class="p-24">
                <form #invoiceForm="ngForm">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="upload-btn-wrapper" *ngIf="!invoiceLogo">
                        <button class="btn">Upload a Logo</button>
                        <input type="file" name="myfile"  accept="image/jpg, image/jpeg, image/png" (change)="handleLogoUpload($event)" required />
                      </div>
                      <div *ngIf="invoiceLogo" style="position: relative; overflow: hidden; margin-bottom: 15px;text-align: center;">
                        <i-tabler name="square-rounded-x" (click)="closeImg()" class="icon-18" style="position: absolute; right: 0;"></i-tabler>
                        <img [src]="invoiceLogo" alt="Uploaded Logo" style="max-width: 200px;margin-top: 25px;  height: inherit;">
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="currencyandthemecolor">
                        <div class="m-r-10 w-100">
                          <mat-form-field appearance="outline" class="w-100" id="billbox">
                            <mat-label>Currency</mat-label>
                            <mat-select name="Currency" [(ngModel)]="iscurrencyName" required>
                              <mat-option *ngFor="let currency of currencyList | keyvalue" [value]="getsymbol(currency.value)">
                                {{getsymbol(currency.value)}}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                        <!-- <div class="m-r-10 w-100">
                          <mat-form-field appearance="outline" class="w-100" id="billbox">
                            <mat-label><span class="color-option-label" [style.background-color]="isInvoiceThemeColor"></span> Invoice Theme Color</mat-label>
                            <mat-select name="InvoiceThemeColor" [(ngModel)]="isInvoiceThemeColor">
                              <mat-option *ngFor="let item of invoiceThemeColorList" [value]="item.colorCode">
                                <span class="color-option" [style.background-color]="item.colorCode"></span>{{ item.colorCode }}
                              </mat-option> 
                            </mat-select>
                          </mat-form-field>
                        </div> -->
                        <div class="m-r-10 w-100">
                          <mat-form-field appearance="outline" class="w-100" id="billbox">
                            <mat-label>Invoice Theme</mat-label>
                            <mat-select name="InvoiceTheme" [(ngModel)]="selectedInvoiceTheme">
                              <mat-option *ngFor="let item of invoiceThemeList" [value]="item.value">
                                <div class="theme-option">
                                  <span class="d-flex align-items-center">
                                    <img [src]="item.imageUrl" style="width: 17%;" class="theme-image">
                                    <div class="InvoiceTheme">
                                      {{ item.name }}
                                    </div>
                                  </span>
                                </div>
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                        
                      </div>
                      <div (mouseenter)="isTitle = true" (mouseleave)="isTitle = false" class="edit m-b-5">
                        
                        <ng-container *ngIf="!isTitle; else titleField">
                          <h5 class="f-w-600 f-s-24 m-0 p-0 text-right h-55 d-flex justify-content-end align-items-center" style="padding: 10px 20px !important;">
                            <div  style="margin-right: 10px;">
                              <i-tabler name="pencil" class="icon-20 d-flex"></i-tabler>
                            </div>{{ mainTitle }}
                          </h5>
                        </ng-container>
                        <ng-template #titleField>
                          <input type="text" class="m-b-5 f-w-600 f-s-16 h-55 text-right" [(ngModel)]="mainTitle" [ngModelOptions]="{standalone: true}"
                            (keydown.enter)="isTitle = false" (blur)="isTitle = false">
                        </ng-template>
                      </div>

                      <div class="row">
                        <div class="col-md-6">
                          <mat-form-field class="w-100 h-60" appearance="outline">
                            <input matInput [matDatepicker]="touchpicker" readonly [(ngModel)]="invoiceDate" placeholder="bill date" name="invoiceDate"/>
                            <mat-datepicker-toggle matIconSuffix [for]="touchpicker"></mat-datepicker-toggle>
                            <mat-datepicker touchUi #touchpicker></mat-datepicker>
                          </mat-form-field>
                        </div>
                        
                        
                        <div class="col-md-6">
                          <div (mouseenter)="isInvoiceId = true" (mouseleave)="isInvoiceId = false" class="edit m-b-5">
                            <ng-container *ngIf="!isInvoiceId; else invoiceIdField">
                              <h5 class="f-w-600 f-s-24 m-0 p-0 text-right h-55 d-flex justify-content-end align-items-center" style="padding: 10px 20px !important;">
                                <div  style="margin-right: 10px;">
                                  <i-tabler name="pencil" class="icon-20 d-flex"></i-tabler>
                                </div>#{{ invoiceId }}
                              </h5>
                            </ng-container>
                            <ng-template #invoiceIdField>
                              <input type="text" class="m-b-5 f-w-600 f-s-16 h-55 text-right" [(ngModel)]="invoiceId" [ngModelOptions]="{standalone: true}"
                                (keydown.enter)="isInvoiceId = false" (blur)="isInvoiceId = false">
                            </ng-template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
      
                  <div class="row">
                    <div class="col-md-6">
                      <div class="row">
                        <div class="col-md-6">
                          <mat-form-field appearance="outline" id="billbox" class="w-100 h-60">
                            <mat-label>Bill From</mat-label>
                            <input type="text" matInput class="form-control" name="customerName" id="customerName"
                              [ngClass]="{'is-invalid': invoiceForm.submitted && CustName.invalid}"
                              [(ngModel)]="invoices.customerName" #CustName="ngModel" required>
                          </mat-form-field>
                        </div>
                        <div class="col-md-6">
                            <mat-form-field appearance="outline" class="w-100 h-60" id="billbox">
                              <mat-label>Email Id</mat-label>
                              <input type="email" matInput class="form-control" name="email" id="email" [(ngModel)]="invoices.email"
                                required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}">
                            </mat-form-field>
                        </div>
      
                        <div class="col-md-12">
                          <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Enter From Address</mat-label>
                            <textarea class="form-control" matInput name="address" id="address"
                              [ngClass]="{'is-invalid': invoiceForm.submitted && Address.invalid}" [(ngModel)]="invoices.address"
                              #Address="ngModel" required rows="1"></textarea>
                          </mat-form-field>
                        </div>
      
                        <div class="col-md-12">
                          <mat-form-field appearance="outline" class="w-100" id="billbox">
                            <mat-label>Contact No</mat-label>
                            <input type="number" matInput class="form-control" name="contactNo" id="contactNo"
                                   [ngClass]="{'is-invalid': invoiceForm.submitted && (ContactNo.invalid || !invoices.contactNo)}"
                                   [(ngModel)]="invoices.contactNo" #ContactNo="ngModel" required 
                                   pattern="[0-9]{10}">
                          </mat-form-field>
                        </div>
                        <div class="col-md-12" *ngIf="!isShowFormGst">
                          <div class="sub-button" (click)="isShowFormGst = true">
                            <i-tabler name="plus" class="icon-16"></i-tabler>
                            GST
                          </div>
                        </div>
                        <div class="col-md-12 d-flex responsiveShowGst" *ngIf="isShowFormGst">
                          <div class="col-md-4">
                            <div (mouseenter)="isFormGst = true" (mouseleave)="isFormGst = false" class="edit m-b-5">
                              <ng-container *ngIf="!isFormGst; else formGST">
                                <h5 class="d-flex f-w-600 f-s-16 text-left m-0 p-0" style="padding: 10px 18px !important;">
                                  <div  style="margin-right: 10px;">
                                    <i-tabler name="pencil" class="icon-20 d-flex"></i-tabler>
                                  </div>
                                  {{ formGSTName
                                  }}
                                </h5>
                              </ng-container>
                              <ng-template #formGST>
                                <input type="text" class="m-b-5 f-w-600 f-s-16" [(ngModel)]="formGSTName" [ngModelOptions]="{standalone: true}"
                                  (keydown.enter)="isFormGst = false" (blur)="isFormGst = false">
                              </ng-template>
                            </div>
  
                          </div>
                          <div class="col-md-7">
                            <mat-form-field appearance="outline" id="billbox" class="w-100 h-60">
                              <mat-label>{{formGSTName}}</mat-label>
                              <input type="text" matInput class="form-control" name="name" id="name"
                                [(ngModel)]="invoices.customerFormGST" #CustGST="ngModel">
                            </mat-form-field>
                          </div>
                          <div class="col-md-1" style="display: flex; justify-content: end;">
                            <div (click)="isShowFormGst = false">
                              <i-tabler name="square-rounded-x" class="icon-18"></i-tabler>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="row">
                        <div class="col-md-6">
                          <mat-form-field appearance="outline" id="billbox" class="w-100 h-60">
                            <mat-label>Bill To</mat-label>
                            <input type="text" matInput class="form-control" name="billName" id="billName"
                              [ngClass]="{'is-invalid': invoiceForm.submitted && billToName.invalid}"
                              [(ngModel)]="invoices.billTo" #billToName="ngModel" required>
                          </mat-form-field>
                        </div>
                        <div class="col-md-6">
                          <mat-form-field appearance="outline" class="w-100 h-60" id="billbox">
                            <mat-label>Email Id</mat-label>
                            <input type="email" matInput class="form-control" name="billEmail" id="billEmail"
                              [(ngModel)]="invoices.billToEmail" required pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}">
                          </mat-form-field>
                        </div>
                        <div class="col-md-12">
                          <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Enter To Address</mat-label>
                            <textarea class="form-control" matInput name="billAddress" id="billAddress"
                              [ngClass]="{'is-invalid': invoiceForm.submitted && billToAddress.invalid}"
                              [(ngModel)]="invoices.billToAddress" #billToAddress="ngModel" required rows="1"></textarea>
                          </mat-form-field>
                        </div>
                        <div class="col-md-12">
                          <mat-form-field appearance="outline" class="w-100" id="billbox">
                            <mat-label>Contact No</mat-label>
                            <input type="number" matInput class="form-control" name="billContactNo" id="billContactNo"
                              [ngClass]="{'is-invalid': invoiceForm.submitted && billToContact.invalid}"
                              [(ngModel)]="invoices.billToContact" #billToContact="ngModel" required pattern="[0-9]{10}">
                          </mat-form-field>
                        </div>

                        <div class="col-md-12" *ngIf="!isShowToGst">
                          <div class="sub-button" (click)="isShowToGst = true">
                            <i-tabler name="plus" class="icon-16"></i-tabler>
                            GST
                          </div>
                        </div>
                        <div class="col-md-12 d-flex responsiveShowGst" *ngIf="isShowToGst">
                        <div class="col-md-4">
                          <div (mouseenter)="isToGst = true" (mouseleave)="isToGst = false" class="edit m-b-5">
                            <ng-container *ngIf="!isToGst; else toGSTNameField">
                              <h5 class="d-flex f-w-600 f-s-16 text-left m-0 p-0" style="padding: 10px 18px !important;">
                                <div  style="margin-right: 10px;">
                                  <i-tabler name="pencil" class="icon-20 d-flex"></i-tabler>
                                </div>
                                {{ toGSTName
                                }}
                              </h5>
                            </ng-container>
                            <ng-template #toGSTNameField>
                              <input type="text" class="m-b-5 f-w-600 f-s-16" [(ngModel)]="toGSTName" [ngModelOptions]="{standalone: true}"
                                (keydown.enter)="isToGst = false" (blur)="isToGst = false">
                            </ng-template>
                          </div>

                        </div>
                        <div class="col-md-7">
                          <mat-form-field appearance="outline" id="billbox" class="w-100 h-60">
                            <mat-label>{{toGSTName}}</mat-label>
                            <input type="text" matInput class="form-control" name="name" id="name"
                              [(ngModel)]="invoices.customerToGST" #CustGST="ngModel">
                          </mat-form-field>
                        </div>
                        <div class="col-md-1" style="display: flex; justify-content: end;">
                          <div (click)="isShowToGst = false">
                            <i-tabler name="square-rounded-x" class="icon-18"></i-tabler>
                          </div>
                        </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
                <div class="text-right m-t-10">
                  <div class="table-responsive showTable">
                    <table class="table table-hover b-1 no-wrap w-100 rounded">
                      <thead>
                        <tr>
                          <th width="30%" class="text-center">Product</th>
                          <th class="text-center">Price</th>
                          <th class="text-center">Quantity</th>
                          <th width="15%" class="text-center">Amount</th>
                          <th class="p-16 text-center">Action</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let product of invoices.products; let i=index">
                          <td>
                            <mat-form-field id="product" appearance="outline" class="w-100 h-40">
                              <input type="text" matInput class="form-control" name="productName{{i}}"
                                [ngClass]="{'is-invalid': invoiceForm.submitted && ProductName.invalid}" id="productName"
                                [(ngModel)]="product.name" #ProductName="ngModel" required>
                            </mat-form-field>
                          </td>
                          <td>
                            <mat-form-field id="product" appearance="outline" class="w-100 hide-hint h-40">
                              <span matPrefix class="prefix">{{iscurrencyName.split(" ")[1]}}</span>
                              <input type="number" matInput class="form-control" name="price{{i}}" id="price"
                                [ngClass]="{'is-invalid': invoiceForm.submitted && ProductPrice.invalid}"
                                [(ngModel)]="product.price" #ProductPrice="ngModel" required min="0">
                            </mat-form-field>
                          </td>
                          <td>
                            <mat-form-field id="product" appearance="outline" class="w-100 hide-hint h-40">
                              <input type="number" matInput class="form-control" name="quantity{{i}}" id="quantity"
                                [ngClass]="{'is-invalid': invoiceForm.submitted && ProductQty.invalid}"
                                [(ngModel)]="product.qty" #ProductQty="ngModel" required min="0">
                            </mat-form-field>
                          </td>
                          <td class="show-text-center">
                            <div>
                              {{iscurrencyName.split(" ")[0]}}
                              {{  ProductQty.valid && ProductPrice.valid ? calculateTotalPrice(product.price ? product.price : 0 , product.qty ? product.qty : 0 , product.discount ? product.discount : 0) : calculateTotalPrice(0 , 0 , 0)}}
                            </div>
                          </td>
                          <td>
                            <button color="warn" [disabled]="invoices.products.length <= 1" style="margin-bottom: 17px;" mat-icon-button (click)="removeRow(i)" class="d-flex justify-content-center">
                              <i-tabler name="trash" class="icon-18 d-flex"></i-tabler>
                            </button>
                          </td>
                        </tr>
                        <div class="addbutton" (click)="addProduct()" *ngIf="invoices.products.length < 5">
                          <button>
                            <div>
                              <i-tabler name="plus" class="icon-16 d-flex"></i-tabler>
                            </div>
                            <div>
                              Product
                            </div>
                          </button>
                        </div>
                      </tbody>
                    </table>
                  </div>
                  <div class="showCard">
                    <div class="cardtext">
                      <span>Product Detail</span>
                    </div>
                    <div *ngFor="let product of invoices.products; let i=index" class="productcard">
                      <div>
                        <mat-form-field id="product" appearance="outline" class="w-100 hide-hint h-40">
                          <mat-label>Product Name</mat-label>
                          <input type="text" matInput class="form-control" name="productName{{i}}"
                            [ngClass]="{'is-invalid': invoiceForm.submitted && ProductName.invalid}" id="productName"
                            [(ngModel)]="product.name" #ProductName="ngModel" required>
                        </mat-form-field>
                        <mat-form-field id="product" appearance="outline" class="w-100 hide-hint h-40">
                          <mat-label>Product Price</mat-label>
                          <span matPrefix class="prefix">{{iscurrencyName.split(" ")[1]}}</span>
                          <input type="number" matInput class="form-control" name="price{{i}}" id="price"
                            [ngClass]="{'is-invalid': invoiceForm.submitted && ProductPrice.invalid}"
                            [(ngModel)]="product.price" #ProductPrice="ngModel" required>
                        </mat-form-field>
                        <mat-form-field id="product" appearance="outline" class="w-100 hide-hint h-40">
                          <mat-label>Product Quantity</mat-label>
                          <input type="number" matInput class="form-control" name="quantity{{i}}" id="quantity"
                            [ngClass]="{'is-invalid': invoiceForm.submitted && ProductQty.invalid}"
                            [(ngModel)]="product.qty" #ProductQty="ngModel" required>
                        </mat-form-field>
                        <div class="totalAmounts">
                          <span>Total :- {{iscurrencyName.split(" ")[0]}}
                            {{calculateTotalPrice(product.price ? product.price : 0 , product.qty ? product.qty : 0 ,
                            product.discount ? product.discount : 0)}}</span>
                          <button color="warn" [disabled]="invoices.products.length <= 1" style="margin-bottom: 6px;" mat-icon-button (click)="removeRow(i)">
                            <i-tabler name="trash" class="icon-18 d-flex"></i-tabler>
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="addbutton" (click)="addProduct()" *ngIf="invoices.products.length < 5">
                      <button>
                        <div>
                          <i-tabler name="plus" class="icon-16 d-flex"></i-tabler>
                        </div>
                        <div>
                          Product
                        </div>
                      </button>
                    </div>
                  </div>
                  <div class="text-right m-t-30">

                    <div class="row">
                      <div class="col-md-8">
                        <div class="nots-term">
                          <div class="col-md-12">
                            <div class="termstextarea">
                              <div (mouseenter)="isTerms = true" (mouseleave)="isTerms = false" class="edit m-b-5">
                                <ng-container *ngIf="!isTerms; else termsField">
                                  <h5 class="d-flex f-w-600 f-s-16 text-left m-0 p-0" style="padding: 10px 20px !important;">
                                    <div  style="margin-right: 10px;">
                                      <i-tabler name="pencil" class="icon-20 d-flex"></i-tabler>
                                    </div>{{ terms }}
                                  </h5>
                                </ng-container>
                                <ng-template #termsField>
                                  <input type="text" class="m-b-5 f-w-600 f-s-16" [(ngModel)]="terms" (keydown.enter)="isTerms = false"
                                    (blur)="isTerms = false">
                                </ng-template>
                              </div>
                              <mat-form-field appearance="outline" class="w-100">
                                <textarea class="form-control" matInput name="terms" id="terms"
                                  placeholder="Terms and conditions - late fees, payment methods, delivery schedule"
                                  [(ngModel)]="termsList" required style="height: 100px;"></textarea>
                              </mat-form-field>
                            </div>
                          </div>
                          <div class="col-md-12">
                            <div class="termstextarea" style="margin-top: 70px;">
                              <div (mouseenter)="isNotes = true" (mouseleave)="isNotes = false" class="edit m-b-5">
                                <ng-container *ngIf="!isNotes; else notesField">
                                  <h5 class="d-flex f-w-600 f-s-16 text-left m-0 p-0" style="padding: 10px 20px !important;">
                                    <div  style="margin-right: 10px;">
                                      <i-tabler name="pencil" class="icon-20 d-flex"></i-tabler>
                                    </div>
                                    {{ notes }}
                                  </h5>
                                </ng-container>
                                <ng-template #notesField>
                                  <input type="text" class="m-b-5 f-w-600 f-s-16" [(ngModel)]="notes" (keydown.enter)="isNotes = false"
                                    (blur)="isNotes = false">
                                </ng-template>
                              </div>
                              <mat-form-field appearance="outline" class="w-100">
                                <textarea class="form-control" matInput name="address" id="Notes" placeholder="Notes - any relevant information not already covered"
                                    [(ngModel)]="notesList" required style="height: 100px;"></textarea>
                            </mat-form-field>                  
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4 responsiveShowTotal">
                        <div class="d-flex align-items-baseline">
                          <div class="col-sm-6">
                            <div (mouseenter)="isEditing = true" (mouseleave)="isEditing = false" class="edit m-b-5">
                              <ng-container *ngIf="!isEditing; else editField">
                                <h5 class="d-flex f-w-600 f-s-16 text-left m-0 p-0" style="padding: 10px 3px !important;">
                                  <div  style="margin-right: 10px;">
                                    <i-tabler name="pencil" class="icon-20 d-flex"></i-tabler>
                                  </div>
                                  {{ text }}
                                </h5>
                              </ng-container>
                              <ng-template #editField>
                                <input type="text" class="m-b-5 f-w-600 f-s-16" [(ngModel)]="text"
                                  (keydown.enter)="isEditing = false" (blur)="isEditing = false">
                              </ng-template>
                            </div>
                          </div>
                          <div class="col-sm-6">
                            {{iscurrencyName.split(" ")[0]}} {{calculateSubTotal()}}
                          </div>
                        </div>
                        <div class="row" style="position: relative;">
                          <ng-container *ngIf="isvisibleButton">
                            <div class="col-sm-6">
                              <div (mouseenter)="isDiscount = true" (mouseleave)="isDiscount = false" class="edit m-b-5">
                                <ng-container *ngIf="!isDiscount; else discountField">
                                  <h5 class="d-flex f-w-600 f-s-16 text-left m-0 p-0" style="padding: 10px 18px !important;">
                                  <div  style="margin-right: 10px;">
                                    <i-tabler name="pencil" class="icon-20 d-flex"></i-tabler>
                                  </div>
                                  {{ discount
                                    }}
                                  </h5>
                                </ng-container>
                                <ng-template #discountField>
                                  <input type="text" class="m-b-5 f-w-600 f-s-16" [(ngModel)]="discount"
                                    (keydown.enter)="isDiscount = false" (blur)="isDiscount = false">
                                </ng-template>
                              </div>
                            </div>
                            <div class="col-sm-6 d-flex justify-content-start align-items-baseline">
                              <mat-form-field id="product" appearance="outline" class="w-100">
                                <!-- <span matPrefix class="prefix">{{selectedDiscountType === 'percentage' ? '%' : iscurrencyName.split(" ")[1]}}</span> -->
                                <input type="number" matInput class="form-control" [(ngModel)]="totalDiscount" required>
                              </mat-form-field>
                              <div>
                                <div style="margin-left: 10px;">
                                  <i-tabler name="square-rounded-x" (click)="discountShow()" class="icon-19"></i-tabler>
                                </div>
                              </div>
                            </div>
                            <div style="width: 70%;position: absolute; bottom: -17px;right: 35px;">
                              <mat-radio-group [(ngModel)]="selectedDiscountType">
                                <mat-radio-button value="percentage" mat-radio-button-size="small">%</mat-radio-button>
                                <mat-radio-button value="rupees" mat-radio-button-size="small">{{iscurrencyName.split(" ")[1]}}</mat-radio-button>
                              </mat-radio-group>
                            </div>
                          </ng-container>
                          <ng-container *ngIf="!isvisibleButton">
                            <div class="sub-button" (click)="isvisibleButton = true">
                              <i-tabler name="plus" class="icon-16"></i-tabler>
                              Discount
                            </div>
                          </ng-container>
                        </div>
                        <div class="row" [ngStyle]="{'margin-top.px': isvisibleButton ? 20 : 0}">
                          <ng-container *ngIf="isvisibleShippingButton">
                            <div class="col-sm-6">
                              <div (mouseenter)="isShipping = true" (mouseleave)="isShipping = false" class="edit m-b-5">
                                <ng-container *ngIf="!isShipping; else shippingField">
                                  <h5 class="d-flex f-w-600 f-s-16 text-left m-0 p-0" style="padding: 10px 18px !important;">
                                    <div  style="margin-right: 10px;">
                                      <i-tabler name="pencil" class="icon-20 d-flex"></i-tabler>
                                    </div>
                                    {{ shipping
                                    }}
                                  </h5>
                                </ng-container>
                                <ng-template #shippingField>
                                  <input type="text" class="m-b-5 f-w-600 f-s-16" [(ngModel)]="shipping"
                                    (keydown.enter)="isShipping = false" (blur)="isShipping = false">
                                </ng-template>
                              </div>
                            </div>
                            <div class="col-sm-6 d-flex justify-content-start align-items-baseline">
                              <mat-form-field id="product" appearance="outline" class="w-100">
                                <span matPrefix class="prefix">{{iscurrencyName.split(" ")[1]}}</span>
                                <input type="number" matInput class="form-control" [(ngModel)]="totalShipping" required>
                              </mat-form-field>
                              <div>
                                <div style="margin-left: 10px;">
                                  <i-tabler name="square-rounded-x" (click)="shippingShow()" class="icon-19"></i-tabler>
                                </div>
                              </div>
                            </div>
                          </ng-container>
                          <ng-container *ngIf="!isvisibleShippingButton">
                            <div class="sub-button" (click)="isvisibleShippingButton = true">
                              <i-tabler name="plus" class="icon-16"></i-tabler>
                              Shipping
                            </div>
                          </ng-container>
                        </div>
                        <div class="row">
                          <ng-container *ngIf="isvisibleTaxButton">
                            <div class="col-sm-6">
                              <div (mouseenter)="isGst = true" (mouseleave)="isGst = false" class="edit m-b-5">
                                <ng-container *ngIf="!isGst; else gstField">
                                  <h5 class="d-flex f-w-600 f-s-16 text-left m-0 p-0" style="padding: 10px 18px !important;">
                                    <div  style="margin-right: 10px;">
                                      <i-tabler name="pencil" class="icon-20 d-flex"></i-tabler>
                                    </div>
                                    {{ gst }}
                                  </h5>
                                </ng-container>
                                <ng-template #gstField>
                                  <input type="text" class="m-b-5 f-w-600 f-s-16" [(ngModel)]="gst"
                                    (keydown.enter)="isGst = false" (blur)="isGst = false">
                                </ng-template>
                              </div>
                            </div>
                            <div class="col-sm-6 d-flex justify-content-start align-items-baseline">
                              <mat-form-field id="product" appearance="outline" class="w-100">
                                <span matPrefix class="prefix">%</span>
                                <input type="number" matInput class="form-control" [(ngModel)]="taxRate" required>
                              </mat-form-field>
                              <div>
                                <div style="margin-left: 10px;">
                                  <i-tabler name="square-rounded-x" (click)="taxRateShow()" class="icon-19"></i-tabler>
                                </div>
                              </div>
                            </div>
                          </ng-container>
                          <ng-container *ngIf="!isvisibleTaxButton">
                            <div class="sub-button" (click)="isvisibleTaxButton = true">
                              <i-tabler name="plus" class="icon-16"></i-tabler>
                              Tax
                            </div>
                          </ng-container>
                        </div>
                      </div>
                    </div>
                    <div style="margin-top: 70px;">
                      <mat-divider></mat-divider>
                    </div>
                    <div class="row">
                      <div class="col-sm-8"></div>
                      <div class="col-sm-2">
                        <h3 class="m-b-0 f-s-18 text-left">Grand Total</h3>
                      </div>
                      <div class="col-sm-2">
                        <h3 class="m-b-0 f-s-18 text-left">
                          <!-- : {{ grandTotal }} -->
                          {{iscurrencyName.split(" ")[0]}} {{grandTotalNumer()}}
                        </h3>
                      </div>
                    </div>
                  </div>
                </div>
      
                
              </mat-card-content>
            </mat-card>
          </mat-sidenav-content>
        </mat-sidenav-container>
      </div>
     <div class="col-md-12 col-sm-12 col-xs-12">
       <div class="row m-t-20" style="display: flex;
       justify-content: center;margin-left: 2px;">
        <button class="m-b-10 m-r-10" color="primary" mat-flat-button
        [disabled]="!iscurrencyName || !invoiceLogo || !invoices.customerName || !invoices.email || !invoices.address || !invoices.contactNo
        || !invoices.billTo || !invoices.billToEmail || !invoices.billToAddress || !invoices.billToAddress || !termsList || !notesList || invoiceForm.invalid" 
          (click)="invoiceForm.valid ? generatePDF('download') : ''">
          Download Invoice
        </button>
        <button class="m-b-10 m-r-10" color="primary" mat-flat-button (click)="PDFprint()"  [disabled]="!iscurrencyName || !invoices.customerName || !invoices.email || !invoices.address || !invoices.contactNo
        || !invoices.billTo || !invoices.billToEmail || !invoices.billToAddress || !invoices.billToAddress || !termsList || !notesList || !selectedInvoiceTheme || invoiceForm.invalid">
          Print Invoice
        </button>
        <!-- <button class="m-b-10 m-r-10" color="primary" mat-flat-button (click)="invoiceForm.valid ? generatePDF('print') : ''"
        [disabled]="!iscurrencyName || !invoiceLogo || !invoices.customerName || !invoices.email || !invoices.address || !invoices.contactNo
        || !invoices.billTo || !invoices.billToEmail || !invoices.billToAddress || !invoices.billToAddress || !termsList || !notesList"
        >
          Print Invoice
        </button> -->
        <!-- <button class="m-b-10 m-r-10" color="primary" mat-flat-button (click)="invoiceForm.valid ? generatePDF() : ''">
          Open Invoice
        </button> -->
        <button class="m-b-10 m-r-10 whatsapp-button" style="background: #25D366; color: #ffff;" mat-flat-button (click)="sendPdfWhatsapp()">
          Send in Whatsapp
        </button>
       </div>
     </div>
  </div>
</div>